<!DOCTYPE html>
<html lang="en-US">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Album List</title>

    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="angular.css" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
    <script>
        var listApp = angular.module('listApp',[]);
        listApp.controller('ListController', ['$scope', function($scope) {
            $scope.myAlbums = [ 
                {name:"Prism Tats", artist:"Prism Tats", release: "2016-04-18", tracksNum: 9, inStock: true, slug:"prism-tats"},
                {name:"Revolver", artist:"The Beatles", release:"1966-08-05", tracksNum: 12, inStock: false, slug:"revolver"},
                {name:"London Calling", artist:"The Clash", release:"1979-12-14", tracksNum: 10, inStock: true, slug:"london-calling"},
                {name:"Discovery", artist:"Daft Punk", release:"2001-02-26", tracksNum: 13, inStock: true, slug:"discovery"}
            ];
            
            $scope.detailAlbum = {};
            
            $scope.showDetails = false;
            
            $scope.albumCount = function(){
                return $scope.myAlbums.length;
            };
            
            $scope.getDetails = function(item){
                $scope.detailAlbum = item;
                $scope.showDetails = true;
            };
            
            $scope.hideDetails = function(){
                $scope.showDetails = false;
            };
        }]);
        
        listApp.filter('searchFor', function(){
            return function(arr, searchString){
                if(!searchString){
                return arr;
                }
                var result = [];
                searchString = searchString.toLowerCase();
                angular.forEach(arr, function(album){
                    if((album.name.toLowerCase().indexOf(searchString) !== -1) || (album.artist.toLowerCase().indexOf(searchString) !== -1)){
                        result.push(album);
                    }
                });
                return result;
            };
        });
    </script>
</head>


<!--View template. Add necessary Angular directives -->
<body ng-app="listApp">
    <div ng-controller="ListController">
        <div class="container-fluid">
            <div class="row">
                <div class="sidebar col-sm-4">
                    <form>
                        <div class="form-group">
                            <label for="search"><h3>Search Albums</h3></label>
                            <input type="text" class="form-control" id="search" placeholder="Album Name" ng-model="searchTerm">
                        </div>
                    </form>
                    
                    <div class="search-results" ng-if="searchTerm">
                        <h4>Search results for "<span ng-bind="searchTerm"></span>"</h4>
                        
                    </div>
                    <p>Showing <span>{{filtered.length}}</span> out of {{myAlbums.length}} total albums</p>
                    <ul class="results-list">
                        <li ng-repeat="a in myAlbums | searchFor:searchTerm as filtered" >
                            <p ng-click="getDetails(a)">{{a.name}} by {{a.artist}}</p>
                            
                        </li>
                    </ul>

                    
                    <!--<hr>
                    <h4>All Albums:</h4>
                    <p>Total Albums: {{albumCount()}}</p>
                    <ul class="complete-list">
                        <li ng-repeat="x in myAlbums">
                            <p>{{x.name + ' by ' + x.artist}} - <span ng-click="getDetails(x)">Show details</span></p>
                            
                        </li>
                    </ul>-->
                </div><!--end sidebar column-->
                <div class="detail-container col-sm-8">
                    <div ng-if="!showDetails" class="intro">
                        <h1>Vinyl Library</h1>
                        <h4>Create a catalog of your albums, and keep your wishlist updated.</h4>
                    </div>
                    <div class="album-detail" ng-if="showDetails">
                        <h2>{{detailAlbum.name}}</h2>
                        <h4>by {{detailAlbum.artist}}</h4>
                        <p>Release Date: {{detailAlbum.release}}</p>
                        <p>Tracks: {{detailAlbum.tracksNum}}</p>
                        <p>In Stock: {{detailAlbum.inStock}}</p>
                        <button type="button" class="close-details" aria-label="Close" ng-click="hideDetails()"><span aria-hidden="true">&times;</span></button>
                    </div>
                </div><!-- end detail-container column-->
            </div><!--end row-->
        </div><!-- end container-fluid-->
    </div>
    
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
</body>
</html>